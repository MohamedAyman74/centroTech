<% layout("layouts/boilerplate") %>
    <link rel="stylesheet" href="/stylesheets/questions.css">
    <style>
        .popup {
            background-color: white;
            border: 2px #4e47ed solid;
            border-radius: 10px;
            /* display: none; */
            flex-direction: column;
            width: 33%;
            position: absolute;
            justify-self: center;
            height: fit-content;
            text-align: center;
            display: none;
        }

        .popup input {
            display: block;
            border-radius: 10px;
            border: 1px #4e47ed solid;
            width: 70%;
            margin: 0 auto;
            margin-bottom: 2em;
            padding: 1em 1em;
        }

        .popup h1 {
            color: #4e47ed;
            text-align: center;
            font-size: 40px;
            margin: 0.5em 0;
        }

        .popup button {
            color: white;
            background-color: #4e47ed;
            border-radius: 10px;
            width: 70%;
            border: none;
            padding: 1em 0;
            margin-bottom: 2em;
            cursor: pointer;
        }

        .popup.show {
            display: block;
        }
    </style>
    <section class="container">
        <h1>Create Ticket - Contact Admin</h1>

        <% tickets.slice().reverse().forEach(ticket=> { %>
            <div class="topic-container">
                <a href="/support-tickets/<%= ticket._id %>">
                    <div class="main-flex">
                        <img src="userimg.png" alt="">
                        <div>
                            <h4>
                                <%= ticket.title %>
                            </h4>
                            <% if(ticket.askedBy){ %>
                                <p id="author">
                                    <%= ticket.askedBy.fullname %>
                                </p>
                                <% } else if(ticket.askedByOAuth){ %>
                                    <p id="author">
                                        <%= ticket.askedByOAuth.fullname %>
                                    </p>
                                    <% } %>
                        </div>
                        <p id="time">
                            <%= ticket.date %>
                        </p>
                    </div>
                </a>
            </div>
            <% }); %>
                <button id="new-topic">New Ticket</button>

                <div class="popup">
                    <h1>Open A Ticket</h1>
                    <form action="/support-tickets" method="POST">
                        <input type="text" name="title" id="title" placeholder="Enter your ticket title">
                        <textarea name="details" id="details" cols="30" rows="10"
                            placeholder="Enter your ticket details"></textarea>
                        <button id="popup-btn" type="submit">Open Ticket</button>
                    </form>
                </div>
    </section>
    <script src="/javascripts/supportTickets.js"></script>